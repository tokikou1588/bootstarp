(function(n){n.extend({html5edit:function(t,i){if(n.isFunction(n.fn.summernote)){var r=n(t),u=typeof i=="object"&&i;return/destroy|hide/.test(i)?r.toggleClass("open").summernote(i):typeof i=="string"?r.hasClass("open")?r.summernote(i):r.html():(u=n.extend({focus:!0,lang:"zh-CN",height:80,dialogsInBody:!0},u),r.on("click",u,function(t,i){var u=n(this).tooltip("hide"),r=n.extend({placeholder:u.attr("placeholder")},t.data,i||{});r.obj.invokeMethodAsync("GetToolBar").then(t=>{var i=u.toggleClass("open").summernote(n.extend({callbacks:{onChange:function(n){r.obj.invokeMethodAsync(r.method,n)}},toolbar:t},r)).next().find(".note-toolbar").on("click","button[data-method]",{note:u,op:r},function(t){var r=n(this),i,u;switch(r.attr("data-method")){case"submit":r.tooltip("dispose");i=t.data.note.toggleClass("open");u=i.summernote("code");i.summernote("destroy");t.data.op.obj.invokeMethodAsync(t.data.op.method,u)}}),f=n('<div class="note-btn-group btn-group note-view note-right"><button type="button" class="note-btn btn btn-sm note-btn-close" tabindex="-1" data-method="submit" title="完成" data-placement="bottom"><i class="fa fa-check"><\/i><\/button><\/div>').appendTo(i).find("button").tooltip({container:"body"});n("body").find('.note-group-select-from-files [accept="image/*"]').attr("accept","image/bmp,image/png,image/jpg,image/jpeg,image/gif")})}).tooltip({title:"点击展开编辑"}),u.value&&r.html(u.value),r.hasClass("open")&&r.trigger("click",{focus:!1}),this)}},bb_editor:function(t,i,r,u,f,e,o){var s=function(){var r=t.getElementsByClassName("editor-body"),u;i==="code"?n(r).hasClass("open")?n(r).summernote("code",o):n(r).html(o):(u={obj:i,method:f,height:e},o&&(u.value=o),n.html5edit(r,u))};r!==""?i.invokeMethodAsync(r).then(t=>{for(var r in t)(function(t,r){r!=null&&(pluginObj={},pluginObj[r]=function(f){var e=n.summernote.ui;f.memo("button."+r,function(){var n=e.button({contents:'<i class="'+t.iconClass+'"><\/i>',container:"body",tooltip:t.tooltip,click:function(){i.invokeMethodAsync(u,r).then(n=>{f.invoke("editor.pasteHTML",n)})}});return this.$button=n.render(),this.$button})},n.extend(n.summernote.plugins,pluginObj))})(t[r],t[r].buttonName);s()}):s()}})})(jQuery);